<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Emploi du temps</title>
		<style>
			body{
				background: linear-gradient(to bottom right, #00a9e0 0%,#323290 20%, #ea1688 40%, #eb2e2e 60%,#fde92e 80%,#009e54 100%);
			}
			table, th, td {
				border : 1px solid black;
				padding : 5px;
				text-align: center;
			}
			option, select{
				font-weight: bold;
				font-size: 18px;
			}
			#div2{
				display: inline-block;
				margin-right: 8px;
			}
			#divGras, #divItalique, #PoliceDeChar, #Couleur, #TailleChar{
				margin-bottom:8px;
			}
			#div3{
				display: inline-block;
				margin-right: 8px;
			}
			#div4{
				display: inline-block;
			}
			#EnGras{
			}
			EnItalique{
			}
			
			input, label{
				font-size: 16px;
			}
			legend{
				font-size: 1.2em;
				font-weight: bold;
			}
			#fieldset1{
				margin-top: 5px;
				display: inline-block;
				float: left;
				width: 260px;
				height: 180px;
			}
			#PutTextInTable{
				margin-left: 5px;
				display: inline-block;
				height: 30px;
				margin: 15px;
			}
			#fieldset2{
				margin-top: 5px;
				display: inline-block;
				vertical-align: top;
//				width:48.5%;
				margin-right: 1px;
			}
			#fieldset3{
				margin-top: 5px;
				display: inline-block;
				vertical-align: top;
			}
		</style>
		<script>
			var nbLignes = 9;
			var nbCols = 8;
			var Jour = "";
			var Lig1DuTableau = ",&nbspLundi &nbsp,Mardi ,Mercredi ,Jeudi ,Vendredi ,Samedi ,Dimanche ";
			function CreateTableau(){
				/* Création de la structure du Tableau à deux Dimensions */
				var tab = new Array(); 
				for (k=0; k < nbLignes; k++){
					tab[k] = new Array();
				}

				tab[0] = Lig1DuTableau.split(","); /* insert les noms de jours dans la première ligne du tableau */

				for (l=1; l<nbLignes; l++){ /* inser les plages horaires dans la premièrie colonne du tableau */
					tab[l][0] = (l+8)+"h - "+(l+9)+"h ";
				}
				
				
				for (m=1; m < nbLignes ; m++){
					for (n=1; n < nbCols ; n++){
						tab[m][n] = "&nbsp";
					}
				}
						
				var Conteneur = "<table>";
				Conteneur.concat("<tr>");
				for (j=0; j<nbCols; j++){
					Conteneur += "<th>" + tab[0][j] + "</th>";
				}
				Conteneur += "</tr>";
				for (i=1; i<nbLignes; i++){
					Conteneur += '<tr>';
					for (j=0; j<nbCols; j++){
						Conteneur += '<td onclick="SendPosition('+i+','+j+')" id=cel'+i+j+' style = "background-color : #880088;">'+tab[i][j]+'</td>';
					}
					Conteneur += "</tr>";
				}
				Conteneur += "</table>";
				return Conteneur;
				//document.body.innerHTML=Conteneur;
			}
			
			function SendPosition(Lig,Col){
				document.getElementById("Lig").value = Lig;
				document.getElementById("Col").value = Col;
				document.getElementById("input01").focus();

				var cellule = "cel"+Lig+Col;
				
				var PoliceDeChar = document.getElementById(cellule).style.fontFamily;
				var EnGras = document.getElementById(cellule).style.fontWeight;
				var EnItalique = document.getElementById(cellule).style.fontStyle;
				var TailleChar = document.getElementById(cellule).style.fontSize;
				var Color = document.getElementById(cellule).style.color;
				var texte = document.getElementById(cellule).innerHTML;
				var BgColorChoisi = document.getElementById(cellule).style.backgroundColor;
//				alert(BgColorChoisi);
				
				if (texte.search("&nbsp")){
					document.getElementById("EnGras").value = EnGras;
					document.getElementById("EnItalique").value = EnItalique;
					document.getElementById("Couleur").value = Color;
					
					if (TailleChar){
						var TailleTemp = Math.round(parseFloat(TailleChar) * 3);
						document.getElementById("TailleChar").value = TailleTemp;
					}
					
					document.getElementById("PoliceDeChar").value = PoliceDeChar;
					document.getElementById("input01").value = texte;
					document.getElementById("MybackgroundColor").value = BgColorChoisi;
				}

				document.getElementById("input01").focus();
			}
			function redimensionneListe(maListe, Ajustement){
				var Ajust;
				if (Ajustement > 0){
					Ajust = Ajustement;
				}else{
					Ajust =1;
				}
				var maListe2 = document.getElementById(maListe);
				maListe2.size = maListe2.options.length * Ajust;
			}
			
			function MiseEnForme()
			{
				var EnGras = document.getElementById("EnGras").value;

				var EnItalique = document.getElementById("EnItalique").value;

				var Color = document.getElementById("Couleur").value;

				var TailleChar = document.getElementById("TailleChar").value;
				TailleChar = (TailleChar/3)+"em";
				
				var PoliceDeChar = document.getElementById("PoliceDeChar").value;

				var lig	= document.getElementById("Lig").value;
				var col = document.getElementById("Col").value;
				var texte = document.getElementById("input01").value;
//				alert(text.valu);
//				if (text.size()==0){
//					text = "&nbsp";
//				}
				var cellule = "cel"+lig+col;
				var celluleSAV = cellule.valueOf();
				
				document.getElementById(cellule).style.fontFamily = PoliceDeChar;
				window.localStorage.setItem("Polcel"+lig+col, PoliceDeChar);

				document.getElementById(cellule).style.fontWeight = EnGras;
				window.localStorage.setItem("Grcel"+lig+col, EnGras);

				document.getElementById(cellule).style.fontStyle = EnItalique;
				window.localStorage.setItem("Itcel"+lig+col, EnItalique);

				document.getElementById(cellule).style.fontSize = TailleChar;
				window.localStorage.setItem("Sizecel"+lig+col, TailleChar);

				document.getElementById(cellule).style.color = Color;
				window.localStorage.setItem("Colcel"+lig+col, Color);

				document.getElementById(cellule).innerHTML = texte;
				window.localStorage.setItem("cel"+lig+col, texte);
//				alert (window.localStorage.getItem("cel"+lig+col)+" ------ "+lig+" "+col);
			}
			function insertCouleurBkGrnd(){
				var BgColorChoisi = document.getElementById("MybackgroundColor").value;
				var lig = document.getElementById("Lig").value;
				var col = document.getElementById("Col").value;
				var cellule = "cel"+lig+col;
//				alert(BgColorChoisi);
				document.getElementById(cellule).style.backgroundColor = BgColorChoisi ;
				window.localStorage.setItem("BgCcel"+lig+col, BgColorChoisi);
			}
			function MajCellules(){
				for (i=1; i<nbLignes; i++){
					Conteneur += '<tr>';
					for (j=1; j<nbCols; j++){
						if (typeof(window.localStorage) != 'undefined'){
							if (localStorage.getItem("cel"+i+j)){
								var cellule = "cel"+i+j;
								document.getElementById(cellule).innerHTML = localStorage.getItem(cellule); 
								document.getElementById(cellule).style.fontFamily = localStorage.getItem("Pol"+cellule);
								document.getElementById(cellule).style.fontWeight = localStorage.getItem("Gr"+cellule);
								document.getElementById(cellule).style.fontStyle = localStorage.getItem("It"+cellule);
								document.getElementById(cellule).style.fontSize = localStorage.getItem("Size"+cellule);
								document.getElementById(cellule).style.color = localStorage.getItem("Col"+cellule);
							}else{
								localStorage.setItem('"cel'+i+j+'"',"&nbsp");
							}
							if (localStorage.getItem("BgCcel"+i+j)){
								var cellule = "cel"+i+j;
								document.getElementById(cellule).style.backgroundColor = localStorage.getItem("BgCcel"+i+j);
							}else{
								localStorage.setItem("BgCcel"+i+j,"#880088");
							}
						}
					}
				}
			}
			function incererQuelquesImages(){
				
			}


//***************	document.getElementById("cel"+m+n).innerHTML = localStorage.getItem("cel"+m+n)	***********
		</script>
	</head>	


	<body BGCOLOR="#009999">

		<!-- <h1  > Emploi du temps </h1> -->
		
		<div id="monDiv">
			contenu du Div
		</div>
		<script>
			Conteneur = CreateTableau();
			document.getElementById("monDiv").innerHTML = Conteneur;
			MajCellules();
			;
		</script>

		<fieldset id="fieldset1">
			<legend> Données du tableau </legend>
			<div>
				<input type="text" size="6" id="Lig" placeholder="No Ligne" /> 
				<input type="text" size="6" id="Col" placeholder="No Colonne" /> <br/><br/>
				<textarea  rows="4" cols="34" onkeypress="if (event.keyCode==13){ MiseEnForme(); event.preventDefault(); return false; }" size="22" id="input01" placeholder="texte ou image à insérer" > </textarea>
			</div>
			<div id="PutTextInTable">
				<INPUT type="button" value="Put Text or Image in Table" onClick="MiseEnForme()">
			</div>
		</fieldset>
		<fieldset id="fieldset2">
			<legend> Mise en forme des cellules </legend>
			<div id="div1">
				<div id="div2">
					<div id="divGras">
					<select id="EnGras">
						<option value="bold" style="font-weight:bolder" >Gras</option>
						<option value="normal">Normal</option>
					</select>
					<script> redimensionneListe("EnGras") </script>
					</div>
					<div id="divItalique">
					<select id="EnItalique">
						<option value="normal">Normal</option>
						<option value="italic" style="font-style:oblique" >Italique</option>
					</select>
					<script> redimensionneListe("EnItalique") </script>
					</div>
					<div>
					<select id="PoliceDeChar">
						<option style="font-family: verdana" value="verdana">verdana</option>
						<option style="font-family: Georgia" value="Georgia">Georgia</option>
						<option style="font-family: serif" value="serif">serif</option>
						<option style="font-family: Times New Roman" value="Times New Roman">Times New Roman</option>
						<option style="font-family: Helvetica" value="Helvetica">Helvetica</option>
						<option style="font-family: Arial" value="Arial">Arial</option>
						<option style="font-family: Geneva" value="Geneva">Geneva</option>
						<option style="font-family: Tahoma" value="Tahoma">Tahoma</option>
						<option style="font-family: Impact" value="Impact">Impact</option>
						<option style="font-family: Charcoal" value="Charcoal">Charcoal</option>
					</select>
					<script> redimensionneListe("PoliceDeChar",1.1) </script>
					</div>
				</div>

				<div id="div3">
					<select id="Couleur">
						<option value="red" style="background-color: red">Rouge</option>
						<option value="green" style="background-color: green">Vert</option>
						<option value="blue" style="background-color: blue; color : #ffffff">Bleu</option>
						<option value="yellow" style="background-color: yellow;">Jaune</option>
						<option value="fuchsia" style="background-color: fuchsia;">Fuchsia</option>
						<option value="violet" style="background-color: violet;">Violet</option>
						<option value="navy" style="background-color: navy; color : #ffffff">Navy</option>
						<option value="aqua" style="background-color: aqua;" selected>Aqua</option>
						<option value="olive" style="background-color: olive; color : #ffffff;" >Olive</option>
						<option value="lime" style="background-color: lime;">Citron vert</option>
						<option value="maroon" style="background-color: maroon; color : #ffffff">Maron</option>
						<option value="teal" style="background-color: teal; color : #ffffff">Bleu Sarcelle</option>
						<option value="#000000" style="background-color: #000000; color : #ffffff">Noir</option>
						<option value="gray" style="background-color: gray; color : #ffffff">Gris</option>
						<option value="silver" style="background-color: silver;">Gris Clair</option>
						<option value="#ffffff" style="background-color: #ffffff">Blanc</option>
					</select>
					<script> redimensionneListe("Couleur") </script>
				</div>
				<div id="div4">
					<select id="TailleChar" style="margin: none">
						<option value="2" style="font-size:0.66em">Très Petite Police</option>
						<option value="3" style="font-size:1em">Petite Police</option>
						<option value="4" style="font-size:1.33em">Police Normal</option>
						<option value="5" style="font-size:1.66em" selected>Font size 4 </option>
						<option value="6" style="font-size:2em">Font size 5 </option>
						<option value="7" style="font-size:2.33em">Font size 6 </option>
						<option value="8" style="font-size:2.67em">Font size 7 </option>
						<option value="9" style="font-size:3em">Font size 8 </option>
						<option value="10" style="font-size:3.33em">Font size 9 </option>
					</select>
					<script> document.getElementById("TailleChar").size = document.getElementById("TailleChar").options.length *2.9; </script>
					<script> redimensionneListe("TailleChar",2.8) </script>
				</div>
				</br>
			</div>
		</fieldset>
		<fieldset id="fieldset3">
			<legend> Couleur de Fond <br/>des cellules </legend>
			<div>
				<h2></h2>
				<label for="MybackgroundColor">Choose a color <br/>for background:&nbsp&nbsp</label><input id="MybackgroundColor" value="#880088" type="color" />
				</br>
				<BR/>
				<INPUT type="button" value="insert background color" onClick="insertCouleurBkGrnd()">
			</div>
		</fieldset>
	</body>
</html>
